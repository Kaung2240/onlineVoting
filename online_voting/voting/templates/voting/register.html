{% extends "voting/base.html" %} {% block content %}


  <!-- Display Error Messages -->
  {% if form.errors %}
  <div class="alert alert-danger">
    <ul>
      {% for field, errors in form.errors.items %}
      <li><strong>{{ field|capfirst }}:</strong> {{ errors|join:", " }}</li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <div class="row justify-content-center mt-5">
    <div class="col-md-10 col-lg-8 col-xl-6">
      <div class="card shadow-lg border-0 rounded-4">
        <div class="card-body p-4">
          <div class="text-center mb-4">
            <h2 class="card-title mb-3">Register</h2>
            <p class="card-text">
              Create an account today to create events and vote for your favorite candidates.
            </p>
          </div>

          <form method="post" novalidate>
            {% csrf_token %}
            <div class="form-group mb-3">
              <label for="id_username">Username</label>
              {{ form.username }} {% if form.username.errors %}
              <small class="text-muted">{{ form.username.errors.as_text }}</small>
              {% endif %}
            </div>

            <div class="form-group mb-3">
              <label for="id_email">Email</label>
              {{ form.email }} {% if form.email.errors %}
              <small class="text-muted">{{ form.email.errors.as_text }}</small>
              {% endif %}
            </div>

            <div class="form-group mb-3">
              <label for="id_name">Full Name</label>
              {{ form.name }} {% if form.name.errors %}
              <small class="text-muted">{{ form.name.errors.as_text }}</small>
              {% endif %}
            </div>

            <div class="form-group mb-3 position-relative">
              <label for="id_password1">Password</label>
              {{ form.password1 }}
              <i class="bi bi-eye position-absolute top-50 end-0 translate-middle-y mt-3 pe-3" id="toggle-password1"
                style="cursor: pointer"></i>
              {% if form.password1.errors %}
              <small class="text-muted">{{ form.password1.errors.as_text }}</small>
              {% endif %}
            </div>

            <div class="form-group mb-3 position-relative">
              <label for="id_password2">Confirm Password</label>
              {{ form.password2 }}
              <i class="bi bi-eye position-absolute top-50 end-0 mt-3 translate-middle-y pe-3" id="toggle-password2"
                style="cursor: pointer"></i>
              {% if form.password2.errors %}
              <small class="text-muted">{{ form.password2.errors.as_text }}</small>
              {% endif %}
            </div>

            <button type="submit" class="btn btn-primary w-100 py-2">Register</button>
          </form>
        </div>
      </div>
    </div>
  </div>


<!-- Include Bootstrap Icons -->
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css" />

<!-- JavaScript for Toggle Password Visibility -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const password1 = document.getElementById("id_password1");
    const password2 = document.getElementById("id_password2");
    const togglePassword1 = document.getElementById("toggle-password1");
    const togglePassword2 = document.getElementById("toggle-password2");

    togglePassword1.addEventListener("click", function () {
      const type = password1.type === "password" ? "text" : "password";
      password1.type = type;
      this.classList.toggle("bi-eye-slash", type === "password");
    });

    togglePassword2.addEventListener("click", function () {
      const type = password2.type === "password" ? "text" : "password";
      password2.type = type;
      this.classList.toggle("bi-eye-slash", type === "password");
    });
  });
</script>
{% endblock %}